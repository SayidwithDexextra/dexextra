# =================================
# DexExtra Order Book System
# Environment Configuration Template
# =================================

# =================================
# CORE INFRASTRUCTURE
# =================================

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Redis Configuration (Upstash)
# For Upstash Redis, use the HTTPS URL format
REDIS_URL=https://your-upstash-endpoint.upstash.io
REDIS_TOKEN=your_upstash_token

# =================================
# BLOCKCHAIN INFRASTRUCTURE
# =================================

# RPC & WebSocket URLs
# For Ganache local development:
# RPC_URL=http://127.0.0.1:7545
# WS_RPC_URL=ws://127.0.0.1:7545
# CHAIN_ID=1337

# For Production (Polygon):
RPC_URL=https://polygon-mainnet.g.alchemy.com/v2/your_alchemy_key
WS_URL=wss://polygon-mainnet.g.alchemy.com/v2/your_alchemy_key

# Wallet Configuration
PRIVATE_KEY=your_settlement_wallet_private_key
SETTLEMENT_WALLET_ADDRESS=0x...

# Webhook Configuration
ALCHEMY_WEBHOOK_SIGNING_KEY=your_alchemy_webhook_signing_key

# =================================
# SMART CONTRACT ADDRESSES
# =================================

# Core Contracts (set after deployment)
ORDER_ROUTER_ADDRESS=0x...
CENTRAL_VAULT_ADDRESS=0x...
SETTLEMENT_ENGINE_ADDRESS=0x...
METRICS_MARKET_FACTORY_ADDRESS=0x...
UMA_ORACLE_MANAGER_ADDRESS=0x...

# External Contracts
USDC_TOKEN_ADDRESS=0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
UMA_FINDER_ADDRESS=0x...

# =================================
# SERVICE CONFIGURATION
# =================================

# Service Toggles
MATCHING_ENGINE_ENABLED=true
SETTLEMENT_QUEUE_ENABLED=true
WEBSOCKET_SERVICE_ENABLED=true
EVENT_INDEXER_ENABLED=true
MONITORING_SERVICE_ENABLED=true

# =================================
# PERFORMANCE TUNING
# =================================

# Order Book Performance
MAX_ORDERS_PER_LEVEL=100
MAX_ORDER_BOOK_DEPTH=50
MATCHING_LATENCY_TARGET_MS=10

# Settlement Configuration
MAX_BATCH_SIZE=50
SETTLEMENT_INTERVAL_MS=5000
CONFIRMATION_DEPTH=12
MAX_SETTLEMENT_RETRIES=3

# Database Performance
DB_CONNECTION_POOL_SIZE=20
DB_QUERY_TIMEOUT_MS=5000

# Redis Performance
REDIS_CONNECTION_POOL_SIZE=10
REDIS_COMMAND_TIMEOUT_MS=1000

# =================================
# FEE CONFIGURATION
# =================================

# Trading Fees (in basis points)
MAKER_FEE_RATE=10
TAKER_FEE_RATE=15
PROTOCOL_FEE_RATE=5

# Gas Configuration
DEFAULT_GAS_LIMIT=5000000
MAX_GAS_PRICE_GWEI=100
GAS_PRICE_BUFFER_PERCENTAGE=10

# =================================
# WEBSOCKET CONFIGURATION
# =================================

# WebSocket Server
WEBSOCKET_PORT=3001
MAX_WEBSOCKET_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL_MS=30000

# Rate Limiting
WEBSOCKET_RATE_LIMIT_POINTS=100
WEBSOCKET_RATE_LIMIT_DURATION_SEC=60
MAX_SUBSCRIPTIONS_PER_USER=50
MAX_MARKETS_PER_USER=10

# =================================
# MONITORING & ALERTS
# =================================

# Health Check Configuration
HEALTH_CHECK_INTERVAL_MS=30000
SERVICE_TIMEOUT_MS=5000

# Alert Configuration
SLACK_WEBHOOK_URL=your_slack_webhook_url_for_alerts
DISCORD_WEBHOOK_URL=your_discord_webhook_url_for_alerts
EMAIL_ALERTS_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password

# Performance Thresholds
MAX_MATCHING_LATENCY_MS=50
MAX_SETTLEMENT_QUEUE_SIZE=1000
MAX_DATABASE_LATENCY_MS=100
MIN_UPTIME_PERCENTAGE=99.5

# =================================
# SECURITY CONFIGURATION
# =================================

# API Security
JWT_SECRET=your_jwt_secret_key_minimum_32_chars
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW_MS=60000

# Signature Verification
EIP712_DOMAIN_NAME=DexExtra
EIP712_DOMAIN_VERSION=1
EIP712_CHAIN_ID=137

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000,https://your-domain.com

# =================================
# DEVELOPMENT / TESTING
# =================================

# Development Mode
NODE_ENV=development
LOG_LEVEL=debug
ENABLE_DEBUG_LOGS=true

# Testing Configuration
TEST_PRIVATE_KEY=your_test_wallet_private_key
TEST_NETWORK_RPC=https://polygon-mumbai.g.alchemy.com/v2/your_test_key
MOCK_SETTLEMENT_MODE=false

# =================================
# PRODUCTION OVERRIDES
# =================================

# Production Settings (uncomment for production)
# NODE_ENV=production
# LOG_LEVEL=info
# ENABLE_DEBUG_LOGS=false
# MONITORING_SERVICE_ENABLED=true
# SETTLEMENT_QUEUE_ENABLED=true

# Production Security
# REQUIRE_WALLET_SIGNATURE=true
# ENABLE_IP_WHITELIST=false
# ALLOWED_IPS=192.168.1.0/24,10.0.0.0/8

# Production Performance
# DB_CONNECTION_POOL_SIZE=50
# REDIS_CONNECTION_POOL_SIZE=20
# MAX_WEBSOCKET_CONNECTIONS=5000

# =================================
# CHAIN CONFIGURATION
# =================================

# Network Settings
# For Ganache local development:
# CHAIN_ID=1337
# NETWORK_NAME=ganache
# BLOCK_EXPLORER_URL=http://localhost:7545

# For Production (Polygon):
CHAIN_ID=137
NETWORK_NAME=polygon
BLOCK_EXPLORER_URL=https://polygonscan.com

# Block Processing
START_BLOCK=latest
REORG_SAFETY_DEPTH=12
BATCH_SIZE=100
MAX_BLOCKS_PER_REQUEST=2000





